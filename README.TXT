
◆实验器材:
	STM32F103开发板
	
◆实验目的:
	本实验为毕业设计硬件端。
	
	
◆说明
	硬件模块由STM32单片机、GPS模组和NB模组组成。其中模组与单片机通过串口连接。

STM32单片机USART1串口连接NB模组，USART2串口连接GPS模组，USART3串口连接ttl转USB连接上位机调试。

STM32首先初始化NB模组和GPS模组，初始化MQTT服务器订阅配置。按照间隔20秒检查GPS数据。获取到GPS数据后，程序判断定位数据是否有效，当数据有效时，程序组装GPS数据字符串，向NB模组发送AT指令。NB模组向MQTT服务器发布GPS数据消息。在服务器端，后台程序在订阅MQTT消息，当有GPS消息发布后，后台订阅程序检查GPS消息是否符合协议规定。消息合法后，后台订阅程序将GPS数据存储到MySQL数据库中。Django服务器对数据库数据进行展示和管理。
----------------------------------------------------------------------------------------------------------
注意：代码可以烧写到单片机运行，最好需要两组供电。建议烧写串口和USART3串口连接电源。USART3串口连接上位机调试波特率9600。上电后按复位键启动程序。

存在Bug：小灯根据设定，会有闪烁。长时间没有闪烁，需要按复位键重新启动。

◆参考资料：电子手册：《STM32F1开发指南-库函数版本》第3.2节。
           视频教程：《手把手教你学STM32》系列视频
		   参考书本：《原子教你玩STM32-库函数版本》
	
